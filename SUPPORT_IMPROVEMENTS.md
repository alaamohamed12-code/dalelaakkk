# ุชุญุณููุงุช ูุธุงู ุงูุฏุนู ุงูููู - ููุฎุต ุงูุชุบููุฑุงุช

## ุงููุดุงูู ุงูุชู ุชู ุญููุง:

### 1. โ ุฅุถุงูุฉ ูุญุงุฏุซุงุช ุงูุฏุนู ุงูููู ุฅูู ุตูุฏูู ุงูุฑุณุงุฆู
- **ุงููุดููุฉ**: ุชุฐุงูุฑ ุงูุฏุนู ุงูููู ูุง ุชุธูุฑ ูู ูุงุฆูุฉ ุงูุฑุณุงุฆู
- **ุงูุญู**: 
  - ุชุญุฏูุซ `Header.tsx` ูุฌูุจ ุชุฐุงูุฑ ุงูุฏุนู ูู API
  - ุฏูุฌ ุงูุชุฐุงูุฑ ูุน ุงููุญุงุฏุซุงุช ุงูุนุงุฏูุฉ
  - ุนุฑุถ ุงูุชุฐุงูุฑ ุจุงุณู "ุงูุฏุนู ุงูููู ๐๏ธ #ุฑูู_ุงูุชุฐูุฑุฉ"
  - ุฅุถุงูุฉ ุฃููููุฉ ูููุฒุฉ ูุฎูููุฉ ุจููุณุฌูุฉ ููุชุฐุงูุฑ
  - ุนุฑุถ ุญุงูุฉ ุงูุชุฐูุฑุฉ (๐ก ููุชูุญุฉุ ๐ข ุชูุช ุงูุฅุฌุงุจุฉุ โซ ูุบููุฉ)
  - ุงูุชูุฌูู ุงูุชููุงุฆู ูุตูุญุฉ ุงููุญุงุฏุซุฉ ุงูุตุญูุญุฉ ุนูุฏ ุงูููุฑ

### 2. โ ูุธุงู ุงูุชูุจููุงุช ุนูุฏ ุงูุฑุฏ
- **ุงููุดููุฉ**: ูุง ุชุธูุฑ ุชูุจููุงุช ุนูุฏ ุฅุฑุณุงู ุงูุฑุฏูุฏ
- **ุงูุญู**:
  - ุชุญุฏูุซ `app/api/support/[id]/route.ts` ูุฅูุดุงุก ุชูุจููุงุช ุชููุงุฆูุฉ
  - ุฅูุดุงุก ุชูุจูู ูููุณุชุฎุฏู ุนูุฏูุง ูุฑุฏ ุงููุณุคูู
  - ุฅูุดุงุก ุชูุจูู ูููุณุคูู ุนูุฏูุง ูุฑุฏ ุงููุณุชุฎุฏู
  - ุงูุชูุจููุงุช ุชุชุถูู ุฑุงุจุท ูุจุงุดุฑ ูููุญุงุฏุซุฉ
  - ุฏุนู ุงููุบุชูู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ ูู ุงูุชูุจููุงุช

### 3. โ ุนุฏุงุฏ ุงูุชุฐุงูุฑ ุงูุฌุฏูุฏุฉ ูู ููุญุฉ ุงูุชุญูู
- **ุงููุดููุฉ**: ูุง ูุธูุฑ ุนุฏุฏ ุงูุชุฐุงูุฑ ุงูุฌุฏูุฏุฉ ุนูู ุฒุฑ ุงูุฏุนู ุงูููู
- **ุงูุญู**:
  - ุชุญุฏูุซ `app/admin-panel/dashboard/page.tsx`
  - ุฌูุจ ุนุฏุฏ ุงูุชุฐุงูุฑ ุงูููุชูุญุฉ (status='open')
  - ุนุฑุถ ุงูุนุฏุฏ ูู badge ุฃุญูุฑ ูุชุญุฑู (animate-pulse)
  - ุงูุชุญุฏูุซ ุงูุชููุงุฆู ุนูุฏ ุชุญููู ุงูุตูุญุฉ

### 4. โ ูุธุงู ุชุชุจุน ุงูุฑุณุงุฆู ุบูุฑ ุงูููุฑูุกุฉ
- **ุงูุชุญุฏูุซุงุช**:
  - ุฅุถุงูุฉ ุญูู `unreadCount` ู `lastReadAt` ุฅูู ุฌุฏูู support_tickets
  - ุญุณุงุจ ุนุฏุฏ ุงูุฑุณุงุฆู ุบูุฑ ุงูููุฑูุกุฉ ูู ุงููุณุคูู
  - API endpoint ุฌุฏูุฏ: `/api/support/[id]/mark-read`
  - ุชุญุฏูุซ `lastReadAt` ุนูุฏ ูุชุญ ุงููุญุงุฏุซุฉ
  - ุนุฑุถ badge ููุฑุณุงุฆู ุบูุฑ ุงูููุฑูุกุฉ ูู ูุงุฆูุฉ ุงูุฑุณุงุฆู

## ุงููููุงุช ุงููุนุฏูุฉ:

### 1. `components/layout/Header.tsx`
```typescript
// ุงูุชุบููุฑุงุช ุงูุฑุฆูุณูุฉ:
- ุฌูุจ ุชุฐุงูุฑ ุงูุฏุนู ุจุงูุฅุถุงูุฉ ูููุญุงุฏุซุงุช ุงูุนุงุฏูุฉ
- ุฏูุฌ ุงูุชุฐุงูุฑ ูุงููุญุงุฏุซุงุช ูู ูุงุฆูุฉ ูุงุญุฏุฉ
- ูุฑุฒ ุญุณุจ ุขุฎุฑ ูุดุงุท
- ุนุฑุถ ูุนูููุงุช ุงูุชุฐูุฑุฉ (ุงูุญุงูุฉุ ุงูููุถูุนุ ุงูููุช)
- ุชูุฌูู ูุฎุชูู ุญุณุจ ููุน ุงููุญุงุฏุซุฉ (support vs regular)
```

### 2. `app/api/support/route.ts`
```typescript
// ุงูุชุบููุฑุงุช:
- ุฅุถุงูุฉ ุญุณุงุจ unreadCount ูู ุงุณุชุนูุงู GET
- ุงุณุชุนูุงู ูุฑุนู ูุญุณุงุจ ุงูุฑุณุงุฆู ุบูุฑ ุงูููุฑูุกุฉ ูู ุงููุณุคูู
- ุงุณุชุฎุฏุงู lastReadAt ููููุงุฑูุฉ
```

### 3. `app/api/support/[id]/route.ts`
```typescript
// ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:
- ุฅูุดุงุก ุชูุจูู ุนูุฏ ุฅุถุงูุฉ ุฑุฏ
- ุชุญุฏูุฏ ุงููุณุชูู ุจูุงุกู ุนูู ููุน ุงููุฑุณู
- ุฑุณุงุฆู ูุฎุตุตุฉ ุจุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- ุฑุงุจุท ูุจุงุดุฑ ูููุญุงุฏุซุฉ ูู ุงูุชูุจูู
```

### 4. `app/api/support/[id]/mark-read/route.ts` (ุฌุฏูุฏ)
```typescript
// Endpoint ุฌุฏูุฏ ูุชุญุฏูุซ lastReadAt
- POST method
- ุชุญุฏูุซ timestamp ุนูุฏ ูุชุญ ุงููุญุงุฏุซุฉ
- ุฅุนุงุฏุฉ ุญุณุงุจ unreadCount
```

### 5. `app/support-chat/[id]/page.tsx`
```typescript
// ุงูุชุญุณููุงุช:
- ุงุณุชุฏุนุงุก mark-read API ุนูุฏ ูุชุญ ุงููุญุงุฏุซุฉ
- ุชุญุฏูุซ lastReadAt ุชููุงุฆูุงู
- ุฅุนุงุฏุฉ ุชุนููู ุนุฏุงุฏ ุงูุฑุณุงุฆู ุบูุฑ ุงูููุฑูุกุฉ
```

### 6. `app/admin-panel/dashboard/page.tsx`
```typescript
// ุงูุฅุถุงูุงุช:
- state ุฌุฏูุฏ: newSupportTickets
- ุฌูุจ ุนุฏุฏ ุงูุชุฐุงูุฑ ุงูููุชูุญุฉ
- ุนุฑุถ badge ูุชุญุฑู ุนูู ุฒุฑ ุงูุฏุนู ุงูููู
- animate-pulse ูููุช ุงูุงูุชุจุงู
```

### 7. `scripts/update-support-table.js` (ุฌุฏูุฏ)
```javascript
// Migration script ูุฅุถุงูุฉ:
- ุนููุฏ unreadCount (INTEGER DEFAULT 0)
- ุนููุฏ lastReadAt (DATETIME)
```

## ููููุฉ ุนูู ุงููุธุงู:

### ุชุชุจุน ุงูุฑุณุงุฆู ุบูุฑ ุงูููุฑูุกุฉ:
1. ุนูุฏูุง ูุฑุณู ุงููุณุคูู ุฑุฏุ ูุชู ุญูุธู ูู senderType='admin'
2. ุนูุฏ ุฌูุจ ุงูุชุฐุงูุฑ ูููุณุชุฎุฏูุ ูุชู ุญุณุงุจ ุนุฏุฏ ุฑุณุงุฆู ุงููุณุคูู ุจุนุฏ lastReadAt
3. ุนูุฏูุง ููุชุญ ุงููุณุชุฎุฏู ุงููุญุงุฏุซุฉุ ูุชู ุชุญุฏูุซ lastReadAt
4. ูุนุงุฏ ุญุณุงุจ unreadCount ุชููุงุฆูุงู ุจูุงุกู ุนูู ุงูุชุงุฑูุฎ ุงูุฌุฏูุฏ

### ุงูุชูุจููุงุช:
1. ุนูุฏ ุฅุถุงูุฉ ุฑุฏ ุฌุฏูุฏ (PUT request)
2. ูุชู ุชุญุฏูุฏ ุงููุณุชูู (ุงููุณุชุฎุฏู ุฃู ุงููุณุคูู)
3. ุฅูุดุงุก ุณุฌู ูู ุฌุฏูู notifications
4. ุงูุชูุจูู ูุธูุฑ ูู ุตูุญุฉ ุงูุฅุดุนุงุฑุงุช
5. ูุชุถูู ุฑุงุจุท ูุจุงุดุฑ ูุตูุญุฉ ุงููุญุงุฏุซุฉ

### ุนุฑุถ ุงูุชุฐุงูุฑ ูู ุงูุฑุณุงุฆู:
1. ุฌูุจ ุงููุญุงุฏุซุงุช ุงูุนุงุฏูุฉ ูุงูุชุฐุงูุฑ ูุนุงู
2. ุชูููุฒ ุงูุชุฐุงูุฑ ุจู type='support'
3. ุฅุถุงูุฉ ูุนูููุงุช otherParty ูุฎุตุตุฉ
4. ูุฑุฒ ุญุณุจ updatedAt
5. ุชูุฌูู ูุฎุชูู ุนูุฏ ุงูููุฑ (messages vs support-chat)

## ุงูุงุฎุชุจุงุฑุงุช ุงููุทููุจุฉ:

โ ุงูุชุญูู ูู:
1. ุธููุฑ ุงูุชุฐุงูุฑ ูู ูุงุฆูุฉ ุงูุฑุณุงุฆู
2. ุนุฏุงุฏ ุงูุฑุณุงุฆู ุบูุฑ ุงูููุฑูุกุฉ ูุนูู ุจุดูู ุตุญูุญ
3. ุงูุชูุจููุงุช ุชุธูุฑ ุนูุฏ ุงูุฑุฏ
4. ุนุฏุงุฏ ุงูุชุฐุงูุฑ ูู ููุญุฉ ุงูุชุญูู ูุนูู
5. lastReadAt ูุชุญุฏุซ ุนูุฏ ูุชุญ ุงููุญุงุฏุซุฉ
6. ุงูุชูุฌูู ุงูุตุญูุญ ููุตูุญุงุช
7. ุงูุชุฑุชูุจ ุงูุตุญูุญ ูู ุงููุงุฆูุฉ
8. ุงูุฃููููุงุช ูุงูุฃููุงู ุงููููุฒุฉ ุชุธูุฑ
9. ุญุงูุฉ ุงูุชุฐูุฑุฉ ุชุธูุฑ ุจุดูู ุตุญูุญ
10. ุงูุชุญุฏูุซ ุงูุชููุงุฆู (polling) ูุนูู

## ููุงุญุธุงุช:

- ุฌููุน ุงููููุงุช ุชู ุงุฎุชุจุงุฑูุง ูุฎุงููุฉ ูู ุงูุฃุฎุทุงุก
- ูุชู ุงูุชุญุฏูุซ ุงูุชููุงุฆู ูู 30 ุซุงููุฉ ูููุงุฆูุฉ
- ูุชู ุงูุชุญุฏูุซ ูู 5 ุซูุงู ุนูุฏ ูุชุญ ุงููุงุฆูุฉ
- ุงูุชุฐุงูุฑ ุชุธูุฑ ุจุฎูููุฉ ุจููุณุฌูุฉ ูุงุชุญุฉ ููุชูููุฒ
- ุงูุฃููููุฉ ๐๏ธ ุชููุฒ ุชุฐุงูุฑ ุงูุฏุนู
- ูุชู ุฏุนู ุงููุบุชูู ูู ุฌููุน ุงูุฃุฌุฒุงุก
